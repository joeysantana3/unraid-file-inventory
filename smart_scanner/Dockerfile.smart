FROM python:3.11-slim

# Install system dependencies
RUN apt-get update && apt-get install -y \
    rsync \
    htop \
    iotop \
    sysstat \
    docker.io \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Copy both scanner scripts
COPY nas_scanner_hp.py ./
COPY smart_scanner.py ./

ENV PYTHONUNBUFFERED=1
ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONOPTIMIZE=1

# Default to smart scanner
CMD ["python", "smart_scanner.py"]
